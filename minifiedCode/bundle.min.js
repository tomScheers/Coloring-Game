(()=>{var e={redVal:255,greenVal:0,blueVal:0,blurVal:0,brightness:100,size:"medium",eraser:!1,lockedSquareColor:"white",currentColor:"rgb(255,0,0)",customColors:{},colorMap:{red:[255,0,0],orange:[255,165,0],yellow:[255,255,0],green:[0,128,0],blue:[0,0,255],indigo:[75,0,130],violet:[238,130,238],white:[255,255,255],lightgray:[211,211,211],silver:[192,192,192],gray:[169,169,169],darkgray:[128,128,128],dimgray:[105,105,105],black:[0,0,0]}},t=(t,r,l)=>{e.redVal=t,e.greenVal=r,e.blueVal=l},r=document.querySelectorAll("dialog"),l=document.querySelectorAll(".color-settings-icon"),o=document.querySelectorAll(".light-square"),s=document.querySelectorAll(".blur-square"),c=document.querySelectorAll(".size-option"),n=document.querySelectorAll(".custom"),i=document.querySelectorAll(".pencil-type"),a=document.getElementById("drawing-canvas"),d=a.getContext("2d"),u=document.getElementById("circle");u.style.width="2rem",u.style.height="2rem",u.style.background=e.currentColor;var m=()=>{e.currentColor=`rgb(${e.redVal}, ${e.greenVal}, ${e.blueVal})`},g=()=>{switch(e.size){case"super-small":return.5;case"small":return 1;case"medium":return 2;case"big":return 3;case"super-big":return 4}},b=e=>{u.style.width=`${e}rem`,u.style.height=`${e}}rem`},y=r=>{r.forEach((r=>{r.ariaLabel=`${r.id.split("-")[0]}-button`,r.addEventListener("click",(()=>{if(e.eraser)return;const l=e.colorMap[r.id];document.querySelectorAll(".color-settings-icon").forEach((e=>{e.classList.remove("selected-settings")})),r.classList.add("selected-settings"),t(l[0],l[1],l[2]),m(),u.style.background=e.currentColor,d.strokeStyle=e.currentColor,s.forEach((t=>{const r=parseFloat(t.id.split("-")[1])/50*.075;t.style.filter=`blur(${r}rem)`,t.style.backgroundColor=e.currentColor})),o.forEach((t=>{t.style.backgroundColor=e.currentColor}))}))}))},v=t=>{const r=document.querySelector(`#${t.id} .color-preview`);["red-value-decrement","red-value-increment","green-value-decrement","green-value-increment","blue-value-decrement","blue-value-increment"].forEach((l=>{const o=document.querySelector(`#${t.id} .${l}`);o.addEventListener("click",(()=>{((t,r)=>{const l=`${t.className.split("-")[0]}Val`,o=document.querySelector(`#${r.id} .${t.parentNode.classList[0]} input`);if(t.classList[0].split("-").includes("increment")){if(parseFloat(o.value)+1>o.max)return;o.value++,e.customColors[r.id][l]++}else{if(parseFloat(o.value)-1<o.min)return;o.value--,e.customColors[r.id][l]--}})(o,t),r.style.backgroundColor=`rgb(${e.customColors[t.id].redVal}, ${e.customColors[t.id].greenVal}, ${e.customColors[t.id].blueVal})`}))}))},C=(t,r)=>{const l=document.querySelector(`#${r.id} .color-preview`),o=parseFloat(t.value);(o<parseFloat(t.min)||t.value.length<=0)&&(t.value=t.min),o>parseFloat(t.max)&&(t.value=t.max),t.value=parseFloat(t.value)+0;const s=`${t.classList[0].split("-")[0]}Val`;e.customColors[r.id][s]=t.value,l.style.backgroundColor=`rgb(${e.customColors[r.id].redVal}, ${e.customColors[r.id].greenVal}, ${e.customColors[r.id].blueVal})`},h=t=>{e.customColors[t.id]={redVal:0,greenVal:0,blueVal:0},(t=>{const r=document.getElementById(`custom-color${t.id.split("-")[1]}`),l=document.querySelector(`#custom-color${t.id.split("-")[1]}`),o=document.querySelector(`#${t.id} .close-button`);l.addEventListener("click",(()=>{r.classList.contains("color-settings-icon")||e.eraser||t.showModal()})),o.addEventListener("click",(()=>{t.close()}))})(t),(e=>{document.querySelectorAll("input[type=number]").forEach((t=>{t.addEventListener("input",(()=>{""!==t.value&&(t.value=parseFloat(t.value))})),t.addEventListener("blur",(()=>{t.blur(),C(t,e)})),t.addEventListener("keydown",(()=>{13===event.keyCode&&(t.blur(),C(t,e))}))}))})(t),v(t),(t=>{const l=document.getElementById(`custom-color${t.id.split("-")[1]}`),o=document.querySelector(`#${t.id} .color-preview`);document.querySelector(`#${t.id} .save-button`).addEventListener("click",(()=>{t.close(),l.style.backgroundColor=`rgb(${e.customColors[t.id].redVal}, ${e.customColors[t.id].greenVal}, ${e.customColors[t.id].blueVal})`,l.innerText="",l.classList.add("color-settings-icon"),e.colorMap[l.id]=[e.customColors[t.id].redVal,e.customColors[t.id].greenVal,e.customColors[t.id].blueVal];const s=document.getElementById(`custom-color${parseInt(t.id.split("-")[1])+1}`);null!==s&&(s.innerText="+",h(r[parseInt(t.id.split("-")[1])]),y([l]),s.classList.remove("hidden"),s.classList.add("color-setting-square"),o.style.backgroundColor="rgb(0,0,0)")}))})(t)},p=()=>{i.forEach((r=>{r.addEventListener("click",(()=>{if("eraser"===r.id!==e.eraser){if(e.eraser=!e.eraser,e.eraser)return b(1.5*g()),d.lineWidth=10*g(e.size),d.filter=`blur(${e.blurVal}rem)`,d.strokeStyle=e.lockedSquareColor,u.style.background=e.lockedSquareColor,l.forEach((t=>{t.style.backgroundColor=e.lockedSquareColor,t.classList.remove("selected-settings")})),s.forEach((t=>{t.style.backgroundColor=e.lockedSquareColor})),o.forEach((t=>{t.style.backgroundColor=e.lockedSquareColor,t.classList.remove("selected-settings"),t.classList.add("eraser-light")})),void n.forEach((t=>{!t.classList.contains("color-setting-square")||t.classList.contains("color-settings-icon")?t.classList.contains("color-settings-icon")&&(t.style.backgroundColor=e.lockedSquareColor):t.innerText="X"}));(r=>{l.forEach((t=>{t.classList.remove("selected-settings");const r=e.colorMap[t.id];t.style.backgroundColor=`rgb(${r[0]}, ${r[1]}, ${r[2]})`})),l[0].classList.add("selected-settings"),o[0].classList.add("selected-settings"),r.classList.add("selected-settings"),t(255,0,0),m(),b(g()),u.style.background=e.currentColor,d.strokeStyle=e.currentColor,d.lineWidth=2*g(e.size),d.filter=`blur(${e.blurVal}rem)`,s.forEach((t=>{t.style.backgroundColor=e.currentColor})),o.forEach((t=>{t.style.backgroundColor=e.currentColor,t.classList.remove("eraser-light")}))})(r)}}))}))},$=t=>{const r=(e=>({x:e.clientX,y:e.clientY}))(t);u.style.left=`calc(${r.x}px - ${u.style.width} / 2)`,u.style.top=`calc(${r.y}px - ${u.style.height} / 2)`,u.style.backgroundColor=e.currentColor},L=!1,k={x:0,y:0},E=e=>{L=!0,k={x:e.clientX-a.getBoundingClientRect().left,y:e.clientY-a.getBoundingClientRect().top},d.beginPath(),d.moveTo(k.x,k.y)},f=e=>{L&&(d.lineTo(e.clientX-a.getBoundingClientRect().left,e.clientY-a.getBoundingClientRect().top),d.stroke())},V=()=>{L=!1};a.width=window.innerWidth/3*2,a.height=a.width/4*6,d.lineWidth=2*g(e.size),d.strokeStyle=e.currentColor;document.addEventListener("DOMContentLoaded",(()=>{b(),p(),c.forEach((t=>{t.addEventListener("click",(()=>{const r=t.value;if(e.size=`${r}`,e.eraser)return b(1.5*g()),void(d.lineWidth=10*g(e.size));b(g()),d.lineWidth=2*g(e.size)}))})),s.forEach((t=>{t.ariaLabel=`${t.id}-button`,t.addEventListener("click",(()=>{const r=parseFloat(t.id.split("-")[1])/50*.075;e.blurVal=r,d.filter=`blur(${r}rem)`,s.forEach((e=>{e.classList.remove("selected-settings")})),t.classList.add("selected-settings")}))})),o.forEach((t=>{t.ariaLabel=`${t.id}-button`,t.addEventListener("click",(()=>{if(e.eraser)return;const r=parseInt(t.id.split("-")[1]);e.brightness=r,u.style.filter=`brightness(${e.brightness}%) blur(0.2rem)`,d.filter=`brightness(${e.brightness}%) blur(${e.blurVal}rem)`,o.forEach((e=>{e.classList.remove("selected-settings")})),t.classList.add("selected-settings")}))})),y(l),h(r[0]),g(),a.addEventListener("mousedown",E),a.addEventListener("mousemove",f),a.addEventListener("mouseup",V),a.addEventListener("mouseout",V),document.addEventListener("mousemove",$)}))})();